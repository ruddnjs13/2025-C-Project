#include "StageSelect.h"


StageSelect::StageSelect()
{
	StageSelectInit();
}

void StageSelect::StageSelectInit()
{
	ShuffleStage();
	StageSelectAscii();
	stageIdx = 0;
}

void StageSelect::StageSelectScene()
{
	if (SceneManager::GetInstance()->isReset)
	{
		StageSelectInit();
	}
	StageSelectRender();
	Sleep(3000);
	SceneManager::GetInstance()->currentScene = Scene::WINCHECK;
}

void StageSelect::ShuffleStage()
{
	std::random_device rd;
	std::mt19937 generator(rd());


	stageArr.clear();
	std::vector<GimmickMode> stages = {GimmickMode::SHOOT,GimmickMode::SHOOT , GimmickMode::SHOOT };
	std::shuffle(stages.begin(), stages.end(), rd);
	for (int i = 0; i < 3;i++) 
	{
		stageArr.push_back(stages[i]);
	}
}

void StageSelect::StageSelectRender()
{
	int coutmode = _setmode(_fileno(stdout), _O_U16TEXT);
	int stageint;
	switch (stageArr[stageIdx])
	{
	case GimmickMode::CORLOR:
		GameManager::GetInstance()->mode = GimmickMode::CORLOR;
		stageint = (stageIdx * 10) + 1;
		break;
	case GimmickMode::WORD:
		GameManager::GetInstance()->mode = GimmickMode::WORD;
		stageint = (stageIdx * 10) + 2;
		break;
	case GimmickMode::SHOOT:
		GameManager::GetInstance()->mode = GimmickMode::SHOOT;
		stageint = (stageIdx * 10) + 3;
		break;

	}
	Gotoxy(0, GetConsoleResolution().Y / 2);
	for (int i = 0; i < StageSelectAsciiMap[stageint].size(); ++i) 
	{
		wcout << StageSelectAsciiMap[stageint][i]<< '\n';
	}
	int wcoutmode = _setmode(_fileno(stdout), coutmode);
	stageIdx++;
	stageIdx = std::clamp(stageIdx, 0, 2);
}

void StageSelect::StageSelectAscii()
{
	StageSelectAsciiMap.insert({1,
		{
			 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗      ██╗            ██████╗ ██████╗ ██╗      ██████╗ ██████╗"
			,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ███║    ██╗    ██╔════╝██╔═══██╗██║     ██╔═══██╗██╔══██╗"
			,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║    ╚██║    ╚═╝    ██║     ██║   ██║██║     ██║   ██║██████╔╝"
			,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║     ██║    ██╗    ██║     ██║   ██║██║     ██║   ██║██╔══██╗"
			,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝     ██║    ╚═╝    ╚██████╗╚██████╔╝███████╗╚██████╔╝██║  ██║"
			,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝      ╚═╝            ╚═════╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚═╝  ╚═╝"
		}
		});
	StageSelectAsciiMap.insert({2,
		{
			 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗      ██╗           ██╗    ██╗ ██████╗ ██████╗ ██████╗"
			,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ███║    ██╗    ██║    ██║██╔═══██╗██╔══██╗██╔══██╗"
			,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║    ╚██║    ╚═╝    ██║ █╗ ██║██║   ██║██████╔╝██║  ██║"
			,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║     ██║    ██╗    ██║███╗██║██║   ██║██╔══██╗██║  ██║"
			,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝     ██║    ╚═╝    ╚███╔███╔╝╚██████╔╝██║  ██║██████╔╝"
			,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝      ╚═╝            ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═════╝"
		}
		});
	StageSelectAsciiMap.insert({3,
		{
		 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗      ██╗           ███████╗██╗  ██╗ ██████╗  ██████╗ ████████╗██╗███╗   ██╗ ██████╗"
		,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ███║    ██╗    ██╔════╝██║  ██║██╔═══██╗██╔═══██╗╚══██╔══╝██║████╗  ██║██╔════╝"
		,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║    ╚██║    ╚═╝    ███████╗███████║██║   ██║██║   ██║   ██║   ██║██╔██╗ ██║██║  ███╗"
		,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║     ██║    ██╗    ╚════██║██╔══██║██║   ██║██║   ██║   ██║   ██║██║╚██╗██║██║   ██║"
		,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝     ██║    ╚═╝    ███████║██║  ██║╚██████╔╝╚██████╔╝   ██║   ██║██║ ╚████║╚██████╔╝"
		,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝      ╚═╝           ╚══════╝╚═╝  ╚═╝ ╚═════╝  ╚═════╝    ╚═╝   ╚═╝╚═╝  ╚═══╝ ╚═════╝"
		} 
		});
	StageSelectAsciiMap.insert({ 11,
		{
			 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗     ██████╗             ██████╗ ██████╗ ██╗      ██████╗ ██████╗"
			,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ╚════██╗    ██╗    ██╔════╝██╔═══██╗██║     ██╔═══██╗██╔══██╗"
			,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║     █████╔╝    ╚═╝    ██║     ██║   ██║██║     ██║   ██║██████╔╝"
			,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║    ██╔═══╝     ██╗    ██║     ██║   ██║██║     ██║   ██║██╔══██╗"
			,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝    ███████╗    ╚═╝    ╚██████╗╚██████╔╝███████╗╚██████╔╝██║  ██║"
			,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝     ╚══════╝            ╚═════╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚═╝  ╚═╝"
		}
		});
	StageSelectAsciiMap.insert({ 12,
		{
			 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗     ██████╗            ██╗    ██╗ ██████╗ ██████╗ ██████╗"
			,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ╚════██╗    ██╗    ██║    ██║██╔═══██╗██╔══██╗██╔══██╗"
			,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║     █████╔╝    ╚═╝    ██║ █╗ ██║██║   ██║██████╔╝██║  ██║"
			,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║    ██╔═══╝     ██╗    ██║███╗██║██║   ██║██╔══██╗██║  ██║"
			,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝    ███████╗    ╚═╝    ╚███╔███╔╝╚██████╔╝██║  ██║██████╔╝"
			,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝     ╚══════╝            ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═════╝"
		}
		});
	StageSelectAsciiMap.insert({ 13,
		{
			 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗     ██████╗            ███████╗██╗  ██╗ ██████╗  ██████╗ ████████╗██╗  ██╗██╗███╗   ██╗ ██████╗"
			,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ╚════██╗    ██╗    ██╔════╝██║  ██║██╔═══██╗██╔═══██╗╚══██╔══╝██║  ██║██║████╗  ██║██╔════╝"
			,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║     █████╔╝    ╚═╝    ███████╗███████║██║   ██║██║   ██║   ██║   ███████║██║██╔██╗ ██║██║  ███╗"
			,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║    ██╔═══╝     ██╗    ╚════██║██╔══██║██║   ██║██║   ██║   ██║   ██╔══██║██║██║╚██╗██║██║   ██║"
			,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝    ███████╗    ╚═╝    ███████║██║  ██║╚██████╔╝╚██████╔╝   ██║   ██║  ██║██║██║ ╚████║╚██████╔╝"
			,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝     ╚══════╝           ╚══════╝╚═╝  ╚═╝ ╚═════╝  ╚═════╝    ╚═╝   ╚═╝  ╚═╝╚═╝╚═╝  ╚═══╝ ╚═════╝"
		}
		});
	StageSelectAsciiMap.insert({ 21,
		{
			 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗     ██████╗             ██████╗ ██████╗ ██╗      ██████╗ ██████╗"
			,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ╚════██╗    ██╗    ██╔════╝██╔═══██╗██║     ██╔═══██╗██╔══██╗"
			,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║     █████╔╝    ╚═╝    ██║     ██║   ██║██║     ██║   ██║██████╔╝"
			,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║     ╚═══██╗    ██╗    ██║     ██║   ██║██║     ██║   ██║██╔══██╗"
			,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝    ██████╔╝    ╚═╝    ╚██████╗╚██████╔╝███████╗╚██████╔╝██║  ██║"
			,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝     ╚═════╝             ╚═════╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚═╝  ╚═╝"
		}
		});
	StageSelectAsciiMap.insert({ 22,
		{
			 L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗     ██████╗            ██╗    ██╗ ██████╗ ██████╗ ██████╗"
			,L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ╚════██╗    ██╗    ██║    ██║██╔═══██╗██╔══██╗██╔══██╗"
			,L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║     █████╔╝    ╚═╝    ██║ █╗ ██║██║   ██║██████╔╝██║  ██║"
			,L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║     ╚═══██╗    ██╗    ██║███╗██║██║   ██║██╔══██╗██║  ██║"
			,L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝    ██████╔╝    ╚═╝    ╚███╔███╔╝╚██████╔╝██║  ██║██████╔╝"
			,L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝     ╚═════╝             ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═════╝"
		}
		});
	StageSelectAsciiMap.insert({ 23,
		{
			L"██████╗  ██████╗ ██╗   ██╗███╗   ██╗██████╗     ██████╗            ███████╗██╗  ██╗ ██████╗  ██████╗ ████████╗██╗  ██╗██╗███╗   ██╗ ██████╗"
			L"██╔══██╗██╔═══██╗██║   ██║████╗  ██║██╔══██╗    ╚════██╗    ██╗    ██╔════╝██║  ██║██╔═══██╗██╔═══██╗╚══██╔══╝██║  ██║██║████╗  ██║██╔════╝"
			L"██████╔╝██║   ██║██║   ██║██╔██╗ ██║██║  ██║     █████╔╝    ╚═╝    ███████╗███████║██║   ██║██║   ██║   ██║   ███████║██║██╔██╗ ██║██║  ███╗"
			L"██╔══██╗██║   ██║██║   ██║██║╚██╗██║██║  ██║     ╚═══██╗    ██╗    ╚════██║██╔══██║██║   ██║██║   ██║   ██║   ██╔══██║██║██║╚██╗██║██║   ██║"
			L"██║  ██║╚██████╔╝╚██████╔╝██║ ╚████║██████╔╝    ██████╔╝    ╚═╝    ███████║██║  ██║╚██████╔╝╚██████╔╝   ██║   ██║  ██║██║██║ ╚████║╚██████╔╝"
			L"╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═══╝╚═════╝     ╚═════╝            ╚══════╝╚═╝  ╚═╝ ╚═════╝  ╚═════╝    ╚═╝   ╚═╝  ╚═╝╚═╝╚═╝  ╚═══╝ ╚═════╝"
		}
		});
	
}

StageSelect::~StageSelect()
{
}
